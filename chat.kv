#:import C kivy.utils.get_color_from_hex
#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition
#:import Window kivy.core.window.Window

<BoxLayout>:
	padding: 10
	spacing: 10

<GridLayout>:
	rows: 3
	cols: 2
	spacing: 10
	row_default_height: 90
	row_force_default: True
<Label>:
	font_size: 25

<BlueButton@Button>:
	font_size: 30
	height: 90
	size_hint: (1, None)
	background_normal: 'assets/button_normal.png'
	background_down: 'assets/button_down.png'
	border: (2, 2, 2, 2)

<RedButton@Button>:
	font_size: 30
	height: 90
	size_hint: (1, None)
	background_normal: 'assets/red_button_normal.png'
	background_down: 'assets/red_button_down.png'
	border: (2, 2, 2, 2)

<List@Button>
	font_size:20
	height: 100
	size_hint: 1, None


<TextInput>:
	font_size: 30
	multiline: False
	padding: [10, 0.5 * (self.height - self.line_height)]

<ScrollView>:
	canvas.before:
		Color:
			rgb: 0, 0, 0
		Rectangle:
			pos: self.pos
			size: self.size
	size_hint: (0.4, 1)

<ChatLabel@Label>:
	text_size: (self.width, None)
	halign: 'left'
	valign: 'top'
	padding: (-10, 0)  # fixed in Kivy 1.8.1
	size_hint: (1, None)
	height: self.texture_size[1]
	markup: True

<LoginLabel@Label>:
	color: 0, 0, 0, 1
	font_size: 25
	text_size: self.size
	halign: 'left'
	valign: 'middle'
	size_hint: (0.4, 1)

<CircularButton@Button>:
	canvas:
		Ellipse:
			pos: self.pos
			size: self.size

<LoginScreen@Screen>:
	canvas:
		Rectangle:
			source:"assets/wallpaper.jpg"
			pos: self.pos
			size: self.size

ScreenManager:
	transition: RiseInTransition()
	LoginScreen:
		name: 'login'
		BoxLayout:
			orientation: 'vertical'
			GridLayout:
				LoginLabel:
					text: 'Username:'

				TextInput:
					id: loginUsr
					text:'Alexey'
					write_tab: False
					multiline: False

				LoginLabel:
					text: 'Password'

				TextInput:
					id: loginPass
					password: True
					text:'DatBoi30'
					write_tab: False
					multiline: False
					on_text_validate: app.login()

			BlueButton:
				color: 0, 0, 0, 1
				text: 'Connect'
				on_press: app.login()
			BlueButton:
				text: 'Sign up'
				color: 0, 0, 0, 1
				on_press: app.sign_up_redirect()
	LoginScreen:
		name: 'signup'
		BoxLayout:
			orientation: 'vertical'

			CircularButton:
				size: dp(150), dp(150)
				background_color: 0, 0, 0, 0
				size_hint: None, None
				pos_hint: {'center_x': .5, 'center_y': .8}

				on_press: app.upload_image()
				Image:
					texture: app.placeholder.texture
					allow_stretch: True
					height: self.parent.height
					width: self.parent.width
					x :self.parent.x
					y: self.parent.y
			GridLayout:
				LoginLabel:
					text: 'Username:'

				TextInput:
					id: username
					text: ''
					write_tab: False
					multiline: False

				LoginLabel:
					text: 'Password'

				TextInput:
					id: passwd
					password: True
					write_tab: False
					multiline: False

				LoginLabel:
					text: 'Password (again)'

				TextInput:
					id: passwd_r
					password: True
					write_tab: False
					multiline: False
					on_text_validate: app.sign_up()

			BlueButton:
				text: 'Sign up'
				color: 0,0,0,1
				on_press: app.sign_up()

		BoxLayout:
			orientation: 'vertical'

	Screen:
		on_pre_enter:
			Window.size = (1080, 720)
		canvas:
			Rectangle:
				source:"assets/large-wallpaper.jpg"
				pos: self.pos
				size: self.size
		name: 'chatRoom'
		BoxLayout:
			orientation: 'horizontal'
			ScrollView:
				do_scroll_y: True
				StackLayout:
				    id: messageList
					size_hint: 1, None


			BoxLayout:
				height: 90
				orientation: 'horizontal'
				padding: 0
				size_hint: (1, None)

				TextInput:
					id: message
					on_text_validate: app.send()

				Button:
					text: 'Send'
					on_press: app.send()
					size_hint: (0.3, 1)