#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition

<GrayBoxLayout@BoxLayout>
	canvas.before:
	    Color:
	        rgba: 0.5, 0.5, 0.5, 1
	    Rectangle:
	        pos: self.pos
	        size: self.size

<ListGridLayout@GridLayout>:
    size_hint_y: None
    height: self.minimum_height
    cols: 1
    rows: 0
    row_default_height: '100dp'
    row_force_default: True
    spacing: 0, 5
    orientation: 'vertical'

<Label>:
	font_size: 25

<MessageBox>:
    RoundedRectangle:
        id: rect
        radius: [(20, 20), (20, 20), (20, 20), (20, 20)]





ScreenManager:
	transition: RiseInTransition()

    sidebar: sidebar.__self__
    conversation_box: conversation_box.__self__

    Screen:
        on_enter:
            Window.size = (1080, 720)
            # app.init_chat_room()  TODO: uncomment
        name: 'chat_room'
        BoxLayout:
            orientation: 'vertical'
            spacing: 0
            padding: 0
            GrayBoxLayout:
                padding: 0
                id: top_bar
                height: 60
                orientation: 'horizontal'
                size_hint: (1, None)
                spacing: 0
                Button:
                    id: request_button
                    size_hint_x: 0.2

                Button:
                    text: 'Logout'
                    size_hint_x: 0.2
                    on_press: app.logout()
                Button:
                    text: 'Start a new chat!'
                    on_press: app.new_chat()

            GrayBoxLayout:
                padding: 0, '5px'
                spacing: 0
                orientation: 'horizontal'
                ScrollView:
                    size_hint_x: 0.4
                    ListGridLayout:
                        id: sidebar

                BoxLayout:
                    padding: 0
                    orientation: 'vertical'
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Rectangle:
                            source:"assets/large-wallpaper.jpg"
                            pos: self.pos
                            size: self.size

                    BoxLayout:
                        ScrollView:
                            do_scroll_x: False
                            do_scroll_y: True
                            id: conversation_box

                    BoxLayout:
                        padding: 0
                        spacing: 0
                        id: message_box
                        height: 90
                        orientation: 'horizontal'
                        size_hint: (1, None)
                        TextInput:
                            id: message_content
                            on_text_validate: app.send()
                        Button:
                            text: 'Send'
                            on_press: app.send()
                            size_hint: (0.3, 1)